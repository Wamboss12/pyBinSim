#The number of channels we want to process
nchannels_in = 2
#Number of frames to be processed in each block.
fragsize = 128
#Sampling rate. Has to be the same as the input signal of JACK
srate = 48000

mhalib = transducers
# Die Equalisierung bewirkt eine Verringerung der Lautstaerke im linken Kanal (da nur einseitig), daher etwas mehr
# Verstaerken. Die Verringerung der Lautstaerke ist relativ stark.
mha.calib_in.peaklevel = [136 136]
mha.calib_out.peaklevel = [120 120]

mha.calib_out.softclip.tau_attack = 0.002
mha.calib_out.softclip.tau_decay = 0.005
mha.calib_out.softclip.threshold = 0.03
mha.calib_out.softclip.slope = 0.5
mha.calib_out.softclip.tau_clip = 1
mha.calib_out.softclip.max_clipped = 1
mha.calib_out.do_clipping = yes

mha.plugin_name = overlapadd
mha.overlapadd.fftlen = 256
mha.overlapadd.wnd.len = 256
mha.overlapadd.wnd.exp = 0.5
mha.overlapadd.plugin_name = mhachain

mha.overlapadd.mhachain.algos = [noise_psd_estimator smooth_cepstrum spec2wave fftfilter wave2spec]
mha.overlapadd.mhachain.wave2spec.wndlen = 256
mha.overlapadd.mhachain.wave2spec.fftlen = 256
mha.overlapadd.mhachain.smooth_cepstrum.noisePow_name = noise_psd_estimator
mha.overlapadd.mhachain.fftfilter.irs=[[0.043302 -0.023954 -0.056741 0.163288 -0.094275 0.063863 0.090183 -0.009711 0.131032 -0.12198 0.097913 0.055587 -0.076557 0.10162 -0.127056 0.01799 0.055798 -0.10548 0.049383 -0.027002 -0.011034 0.048341 -0.058403 0.029522 0.021882 0.012371 0.024439 -0.039807 0.045547 0.000531 0.007908 0.01822 -0.051508 0.043426 -0.012263 -0.010575 0.021197 -0.044559 0.024634 -0.006109 -0.017318 0.015101 -0.016546 0.012283 -0.002084 -0.004914 0.00561 0.005315 0.009737 -0.007643 0.007788 -0.001372 0.001076 0.009714 -0.007858 0.003203 0.000303 -0.000368 0.008051 -0.001172 0.001457 0.002603 -0.001594 0.005442 0.001188 -0.001849 0.002643 -0.00103 -0.000153 0.001477 -0.001738 0.001982 0.002136 -0.001361 0.000719 -0.000708 0.003616 0.00032 -0.002118 0.004054 -0.001113 0.001729 0.002555 -0.002174 0.002705 0.002118 0.000238 0.002566 0.000676 0.001022 0.001318 0.001494 0.00064 -0.000438 0.002036 -0.001137 0.001016 0.0024 -0.000817 0.002395 0.001314 0.000235 0.002292 0.000429 0.001567 0.002065 -0.000798 0.000862 0.00172 0.000982 0.001101 0.001003 0.000646 0.001816 0.001716 0.00047 0.002062 0.001117 0.000749 0.00166 0.000222 0.000652 0.001942 -8.6e-05 0.000473 0.001938 0.000169 0.001203 0.000824 -7.2e-05 0.001622 0.000624 0.000481 0.001228 0.000387 0.001246 0.0009 0.00112 0.00112 0.000907 0.001591 3.2e-05 0.001538 0.001015 0.000198 0.001819 -0.000428 0.000604 0.001698 -0.000477 0.001589 0.000547 -0.000262 0.002139 -0.000306 0.001278 0.001256 -0.000305 0.002017 0.000283 0.000816 0.001681 0.000191 0.001078 0.000732 0.000453 0.000934 0.000384 0.00108 0.000757 0.000668 0.000845 0.000355 0.001304 0.001194 0.000384 0.000706 0.001149 0.000941 0.001102 -4.5e-05 0.000767 0.001552 0.000492 0.001082 0.000527 0.001722 0.001616 0.000943 0.001179 0.000314 0.001847 0.001014 7.5e-05 0.00123 0.000507 0.001197 0.00145 5.2e-05 0.001352 0.001139 0.00027 0.001824 6.2e-05 0.000814 0.00133 -0.000494 0.002068 0.000184 0.001506 0.001985 -0.000266 0.002312 0.000674 0.002582 0.001216 0.00027 0.001967 0.000718 0.002496 0.000292 0.000533 0.001893 0.001424 0.000232 0.000907 0.00052 0.001058 0.003148 -0.000584 0.001472 5.9e-05 0.000629 0.001643 -0.00049 -0.000961 -0.000558 0.004054 -0.00328 0.001453 0.000848 -0.000715 0.004906 -0.003682 0.004172 0.000683 0.001699 0.002742 -0.002526 0.003894 0.000778 0.003074 -0.001591 0.000164 0.002965 0.001297 -0.002311 0.001435 -0.001393 -0.001134 0.006624 -0.01628 0.008339 -0.001579 -0.007819 0.014744 -0.015005 0.005195 0.000632 0.000854 0.003211 -0.002843 0.003625 -0.003038 0.015729 -0.020369 0.00652 0.016422 0.0];[-0.062892 -0.072475 0.237161 -0.119703 0.071966 0.106007 -0.041608 0.159114 -0.132505 0.054623 0.128483 -0.093488 0.044641 -0.095148 -0.012859 0.138276 -0.143638 -0.048971 0.094455 -0.060272 0.057988 -0.034243 -0.081075 0.171122 -0.017178 -0.070828 0.075527 -0.027123 0.058261 0.031873 -0.125282 0.0566 0.061325 -0.062193 0.033651 -0.059879 -0.024082 0.107302 -0.076352 -0.026829 0.040219 -0.047924 0.062424 -0.005175 -0.07056 0.060147 0.010465 -0.017652 0.026403 -0.035232 0.011156 0.044011 -0.041639 0.002035 0.019138 -0.022501 0.026917 -0.007015 -0.022371 0.036376 -0.010312 -0.012493 0.023476 -0.015227 0.003503 0.015455 -0.023172 0.010946 0.011654 -0.020884 0.015605 0.000878 -0.011825 0.017706 -0.009627 -0.001857 0.014529 -0.010784 0.008423 0.005626 -0.011796 0.011205 0.000443 -0.003074 0.010063 -0.006992 0.001717 0.008967 -0.004721 0.003442 0.001468 -0.003073 0.004544 0.000643 -0.003325 0.000653 0.001451 -0.001406 0.004386 0.001184 -0.001011 0.0058 0.000464 0.004479 0.003608 -0.002759 0.004898 0.003644 0.000693 0.000892 -0.00168 0.001439 0.004747 0.000684 -0.002613 0.001362 0.002068 0.002145 0.001237 -0.003094 0.00152 0.003961 -6.5e-05 0.000469 0.000563 0.000283 0.003423 0.000465 -0.001044 0.003149 -0.000198 0.000868 0.001897 -0.001719 0.002366 0.000627 -0.001041 0.002441 -9.1e-05 0.001063 0.001618 -0.000737 0.001684 0.002055 0.000718 0.000501 0.000367 0.001037 0.00174 0.000193 -0.000432 0.001382 0.001813 0.001496 0.00036 0.000343 0.001989 0.001948 0.001249 0.000908 0.000641 0.001433 0.000955 0.000884 0.000916 -0.000477 0.002019 0.001426 0.000551 0.00214 -0.000609 0.001702 0.002179 -0.00048 0.001758 0.000113 0.000431 0.002288 -0.000521 0.000398 0.001363 -0.000219 0.002645 0.000697 -0.001706 0.0026 -0.000201 0.000453 0.001245 -0.001429 0.003592 0.001699 -0.000462 0.002298 0.002145 0.002404 0.00228 -0.000311 0.00135 0.003914 -0.001544 -0.000423 0.000553 7.1e-05 0.002501 -0.002455 0.000525 0.002303 4.9e-05 0.001885 -0.001574 0.001466 0.002994 0.001545 0.002533 -0.001382 0.00198 0.002751 0.001599 0.001071 -0.001383 0.002961 0.001148 0.001387 0.000189 0.000477 0.003747 -0.000618 0.001689 -0.000895 0.00039 0.002809 -0.000364 0.000279 -0.001299 0.00168 0.001244 -0.000669 -0.00015 0.002302 0.000982 -0.000365 -0.000208 0.002385 0.006432 -0.002172 0.004166 -0.000256 0.000401 0.010906 -0.004051 0.004369 -0.000682 -0.003499 0.00852 -0.005117 -0.001722 -0.000439 -0.002509 0.007485 -0.009397 -0.01118 0.018166 -0.009888 -0.004214 0.01512 -0.029623 0.020454 0.007175 -0.019348 0.033365 -0.036461 0.012871 0.035671 -0.043325 0.024458 -0.00512 -0.009071 0.0]]
mha.overlapadd.mhachain.fftfilter.fftlen=1024

#In this example, we load the IO library that connects
#the MHA to the Jack audio server.
iolib = MHAIOJack
# The following variable is used to select the input sound
# channel(s), following the usual Jack nomenclature
io.con_in = [system:capture_4 system:capture_7]
# con_out sets the output channels
io.con_out = [system:playback_4 system:playback_7]